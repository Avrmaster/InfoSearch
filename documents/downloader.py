import urllib3
import certifi

http = urllib3.PoolManager(
    cert_reqs='CERT_REQUIRED',
    ca_certs=certifi.where())

txt_urls = \
    ["http://www.glozman.com/TextPages/Clancy%20Tom%20-%20Patriot%20Games.txt",
     "http://www.glozman.com/TextPages/Clancy%20Tom%20-%20Red%20Storm%20Rising.txt",
     "http://www.glozman.com/TextPages/Clarke%20Arthur%20C%20-%203001%20The%20Final%20Odissey.txt",
     "http://www.glozman.com/TextPages/Frank%20Herbert%20-%20Children%20of%20Dune.txt",
     "http://www.glozman.com/TextPages/Frank%20Herbert%20-%20Dune%20Messiah.txt",
     "http://www.glozman.com/TextPages/Frank%20Herbert%20-%20Dune.txt",
     "http://www.glozman.com/TextPages/Harry%20Potter%201%20-%20Sorcerer's%20Stone.txt",
     "http://www.glozman.com/TextPages/Harry%20Potter%202%20-%20Chamber%20of%20Secrets.txt",
     "http://www.glozman.com/TextPages/Harry%20Potter%203%20-%20The%20Prisoner%20Of%20Azkaban.txt",
     "http://www.glozman.com/TextPages/Harry%20Potter%204%20-%20The%20Goblet%20Of%20Fire.txt",
     "http://www.glozman.com/TextPages/Harry%20Potter%205%20-%20Order%20of%20the%20Phoenix.txt",
     "http://www.glozman.com/TextPages/Harry%20Potter%206%20-%20The%20Half%20Blood%20Prince.txt",
     "http://www.glozman.com/TextPages/Harry%20Potter%207%20-%20Deathly%20Hollows.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Strike%20at%20Shayol%20Ghul.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2001%20-%20Eye%20of%20the%20world.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2002%20-%20The%20Great%20Hunt.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2003%20-%20The%20Dragon%20Reborn.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2004%20-%20The%20Shadow%20Rising.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2005%20-%20The%20Fires%20of%20Heaven.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2006%20-%20Lord%20of%20Chaos.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2007%20-%20A%20Crown%20of%20Swords.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2008%20-%20The%20Path%20of%20Daggers.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2009%20-%20Winters%20Heart.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2010%20-%20Crossroads%20of%20Twilight.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%2011%20-%20Knife%20of%20Dreams.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%20Prelude%20-%20New%20Spring.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%20The%20Wheel%20of%20Time%20Compendium.txt",
     "http://www.glozman.com/TextPages/Robert%20Jordan%20-%2012%20-%20The%20Gathering%20Storm%20-%20Chapter%20One.txt",
     "http://www.glozman.com/TextPages/R.A.%20Salvatore%20-%20The%20Dark%20Elf%20Trilogy.txt",
     "http://www.glozman.com/TextPages/R.A.Salvatore%20-%20Icewind%20Dale%20Trilogy%201%20-%20The%20Crystal%20Shard.txt",
     "http://www.glozman.com/TextPages/R.A.%20Salvatore%20-%20The%20Icewind%20Dale%20Trilogy%20-%202%20-%20Streams%20of%20Silver.txt",
     "http://www.glozman.com/TextPages/R.A.%20Salvatore%20-%20The%20Icewind%20Dale%20Trilogy%20-%203%20-%20The%20Halfling's%20Gem.txt",
     "http://www.glozman.com/TextPages/R.A.%20Salvatore%20-%20The%20Legacy%20of%20the%20Drow%201%20-%20Legacy.txt",
     "http://www.glozman.com/TextPages/RA%20SalvatoreThe%20Legacy%20of%20The%20Drow%20-%202%20-%20Starless%20Night.txt",
     "http://www.glozman.com/TextPages/R.A.%20Salvatore%20-%20The%20Legacy%20of%20the%20Drow%20III%20-%20Siege%20of%20Darkness.txt",
     "http://www.glozman.com/TextPages/R.A.%20Salvatore%20-%20The%20Legacy%20of%20the%20Drow%20IV%20-%20Passage%20to%20Dawn.txt",
     "http://www.glozman.com/TextPages/Salvatore,%20R.A.%20-%20Paths%20of%20Darkness%201%20-%20The%20Silent%20Blade.txt",
     "http://www.glozman.com/TextPages/Salvatore,%20R.A.%20-%20Paths%20of%20Darkness%202%20-%20The%20Spine%20of%20the%20World.txt",
     "http://www.glozman.com/TextPages/Salvatore,%20R.A.%20-%20Paths%20of%20Darkness%203%20-%20Servant%20of%20the%20Shard.txt",
     "http://www.glozman.com/TextPages/Salvatore,%20RA%20-%20Cleric%20Quintet%201%20-%20Canticle.txt",
     "http://www.glozman.com/TextPages/Salvatore,%20RA%20-%20Cleric%20Quintet%202%20-%20In%20Sylvan%20Shadows.txt",
     "http://www.glozman.com/TextPages/Salvatore,%20RA%20-%20Cleric%20Quintet%203%20-%20Night%20Masks.txt",
     "http://www.glozman.com/TextPages/Salvatore,%20RA%20-%20Cleric%20Quintet%204%20-%20The%20Fallen%20Fortress.txt",
     "http://www.glozman.com/TextPages/Salvatore,%20RA%20-%20Cleric%20Quintet%205%20-The%20Chaos%20Curse.txt",
     "http://www.glozman.com/TextPages/01%20The%20Thousand%20Orcs.txt",
     "http://www.glozman.com/TextPages/02%20The%20Lone%20Drow.txt",
     "http://www.glozman.com/TextPages/03%20The%20Two%20Swords.txt",
     "http://www.glozman.com/TextPages/01%20Spellfire.txt",
     "http://www.glozman.com/TextPages/02%20Crown%20of%20Fire.txt",
     "http://www.glozman.com/TextPages/01%20Horselords.txt",
     "http://www.glozman.com/TextPages/02%20Dragonwall.txt",
     "http://www.glozman.com/TextPages/03%20Crusade.txt",
     "http://www.glozman.com/TextPages/01%20Shadowdale.txt",
     "http://www.glozman.com/TextPages/02%20Tantras.txt",
     "http://www.glozman.com/TextPages/03%20Waterdeep.txt",
     "http://www.glozman.com/TextPages/04%20Prince%20of%20Lies.txt",
     "http://www.glozman.com/TextPages/05%20Crucible%20-%20The%20Trial%20Of%20Cyric%20The%20Mad.txt",
     "http://www.glozman.com/TextPages/01%20Dragons%20of%20Autumn%20Twilight.txt",
     "http://www.glozman.com/TextPages/02%20Dragons%20of%20Winter%20Night.txt",
     "http://www.glozman.com/TextPages/03%20Dragons%20of%20Spring%20Dawning.txt",
     "http://www.glozman.com/TextPages/01%20Time%20Of%20The%20Twins.txt",
     "http://www.glozman.com/TextPages/02%20War%20Of%20The%20Twins.txt",
     "http://www.glozman.com/TextPages/03%20Test%20Of%20The%20Twins.txt",
     "http://www.glozman.com/TextPages/01%20The%20Second%20Generation.txt",
     "http://www.glozman.com/TextPages/02%20Dragons%20of%20Summer%20Flame.txt",
     "http://www.glozman.com/TextPages/Dragonlance%20Preludes%202%20vol%202%20-%20Flint%20the%20King.txt",
     "http://www.glozman.com/TextPages/01%20The%20Legend%20Of%20Huma.txt",
     "http://www.glozman.com/TextPages/Lloyd%20Alexander%20-%20[Chronicles%20Of%20Prydain%201]%20Book%20of%20Three.txt",
     "http://www.glozman.com/TextPages/Lloyd%20Alexander%20-%20[Chronicles%20Of%20Prydain%202]%20Black%20Cauldron.txt",
     "http://www.glozman.com/TextPages/Lloyd%20Alexander%20-%20[Chronicles%20Of%20Prydain%203]%20Castle%20Of%20Llyr.txt",
     "http://www.glozman.com/TextPages/Lloyd%20Alexander%20-%20[Chronicles%20Of%20Prydain%204]%20Taran%20Wanderer.txt",
     "http://www.glozman.com/TextPages/Lloyd%20Alexander%20-%20[Chronicles%20Of%20Prydain%205]%20High%20King.txt",
     "http://www.glozman.com/TextPages/Auel,%20Jean%20-%20Earth's%20Children%2001%20-%20The%20Clan%20of%20the%20Cave%20Bear.txt",
     "http://www.glozman.com/TextPages/Auel,%20Jean%20-%20Earth's%20Children%2002%20-%20The%20Valley%20of%20Horses.txt",
     "http://www.glozman.com/TextPages/Auel,%20Jean%20-%20Earth's%20Children%2003%20-%20The%20Mammoth%20Hunters.txt",
     "http://www.glozman.com/TextPages/Auel,%20Jean%20-%20Earth's%20Children%2004%20-%20Plains%20Of%20Passage.txt",
     "http://www.glozman.com/TextPages/Auel,%20Jean%20-%20Earth's%20Children%2005%20-%20The%20Shelters%20Of%20Stone.txt",
     "http://www.glozman.com/TextPages/Star%20Wars%20-%20[Thrawn%20Trilogy%2001]%20-%20Heir%20to%20the%20Empire%20(by%20Timothy%20Zahn).txt",
     "http://www.glozman.com/TextPages/Star%20Wars%20-%20[Thrawn%20Trilogy%2002]%20-%20Dark%20Force%20Rising%20(by%20Timothy%20Zahn).txt",
     "http://www.glozman.com/TextPages/Star%20Wars%20-%20[Thrawn%20Trilogy%2003]%20-%20The%20Last%20Command%20(by%20Timothy%20Zahn).txt",
     "http://www.glozman.com/TextPages/01%20-%20The%20Fellowship%20Of%20The%20Ring.txt",
     "http://www.glozman.com/TextPages/02%20-%20The%20Two%20Towers.txt",
     "http://www.glozman.com/TextPages/03%20-%20The%20Return%20Of%20The%20King.txt",
     "http://www.glozman.com/TextPages/04%20-%20Appendices%20And%20Index.txt"]

for i, url in enumerate(txt_urls):
    print(f"\rDownloading {((i+1)*100)//len(txt_urls)}%", end='')
    downloaded_file = http.request('GET', url).data
    print(f"\rWriting..", end='')
    with open(f"txt/{(url[url.rindex('/')+1:]).replace('%20', ' ')}", 'wb+') as out:
        out.write(downloaded_file)
print("Finished")
